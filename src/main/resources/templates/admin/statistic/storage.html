<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:include="~{/base::head('Book Storage')}">
</head>

<body>
  <!-- header -->
  <header th:replace="/base::header"></header>

  <!-- main -->
  <main class="container-fluid my-2" id="main">
    <div class="row">
      <!-- navside -->
      <nav class="col-3" th:insert="/base::navside">
      </nav>

      <!-- section -->
      <section class="col-9">
        <!-- section header -->
        <div th:replace="/base::section-header('alert-success', 'Book Statistic:', null)">
        </div>

        <div>
          <form class="form-inline" th:action="@{/admin/statistic/storage}" method="GET">
            <label for="limit mx-2">Limit</label>
            <input type="number" class="form-control mx-2" name="limit" id="limit" placeholder="limit">
            <button type="submit" class="btn btn-primary mx-2">Get result</button>
          </form>
        </div>

        <div class="mt-3">
          <table class="table table-sm">
            <thead>
              <tr>
                <th>Book id</th>
                <th>Book name</th>
                <th>Remain Quantity</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="book : ${books}">
                <td scope="row" th:text="${book.id}"></td>
                <td th:text="${book.name}"></td>
                <td th:text="${book.remainQuantity}"></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- section-footer -->
        <nav aria-label="Page navigation">
          <ul class="pagination pagination-sm justify-content-center" style="margin: 5px 0">
            <li class="page-item" th:each="page, i : ${pages}"
              th:attrappend="class= ( ${page} == ${session.curPage} ) ? (' active') : (' ')">

              <!-- previous -->
              <a class="page-link" th:if="(${i.first}) and (${page} != -1) and (${page} != 0)"
                th:href="@{/admin/statistic/storage#main(p=${page}, psize=(${session.pageSize} != null)? (${session.pageSize}) : 15 )}"
                aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
              <!-- pages -->
              <a class="page-link" th:unless="${i.first} or ${i.last}"
                th:href="@{/admin/statistic/storage#main(p=${page}, psize=(${session.pageSize} != null)? (${session.pageSize}) : 15 )}"
                th:text="${page}"></a>
              <!-- next -->
              <a class="page-link" th:if="(${i.last}) and (${page} != (${session.lastPage} + 1))"
                th:href="@{/admin/statistic/storage#main(p=${page}, psize=(${session.pageSize} != null)? (${session.pageSize}) : 15 )}"
                aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>

            </li>
          </ul>
        </nav>
      </section>
    </div>
  </main>

  <!-- footer -->
  <footer th:replace="/base::footer"></footer>
</body>

</html>